title = pushedsomethingbroken_title_216
cards = revert push

[description]

pushedsomethingbroken_description_217

[setup]

echo "this is fine

?

?

?" > text
git add .
git commit -m fine
echo "this is fine

this is also fine

?

?" > text
git commit -am "also fine"
echo "this is fine

this is also fine

this is very bad

?" > text
git commit -am "very bad"
echo "this is fine

this is also fine

this is very bad

this is fine again" > text
git commit -am "fine again"

git push team main
git branch -u team/main main

[setup team]

[win team]

# The team's main branch no longer contains the bad thing.
! { git show main:text | grep -q "very bad"; }
# And the history has not been modified.
git show main^:text | grep -q "very bad"
